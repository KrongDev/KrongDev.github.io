<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="600" viewBox="0 0 1200 600">
  <style>
    .title { font: 700 28px sans-serif; }
    .subtitle { font: 600 16px sans-serif; fill: #444 }
    .box { fill: #f5f7ff; stroke: #3758f9; stroke-width: 2; rx: 8 }
    .svc { fill: #f9f9f9; stroke: #999; stroke-width: 1.5; rx: 6 }
    .arrow { stroke: #333; stroke-width: 2; marker-end: url(#arrow) }
    .label { font: 600 14px sans-serif; }
  </style>
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#333" />
    </marker>
  </defs>
  <text x="30" y="50" class="title">Platform MSA: Distributed Transaction Context</text>
  <text x="30" y="80" class="subtitle">Saga + TCC + Outbox(CDC) with Kafka, Observability</text>

  <rect class="box" x="40" y="110" width="1120" height="460" />
  <text x="55" y="140" class="label">Event Backbone (Kafka)</text>

  <rect class="svc" x="80" y="170" width="280" height="160" />
  <text x="95" y="200" class="label">Order Service</text>
  <text x="95" y="225" class="subtitle">Orchestrator / Choreography Producer</text>

  <rect class="svc" x="460" y="170" width="280" height="160" />
  <text x="475" y="200" class="label">Payment Service</text>
  <text x="475" y="225" class="subtitle">TCC Try/Confirm/Cancel</text>

  <rect class="svc" x="840" y="170" width="280" height="160" />
  <text x="855" y="200" class="label">Inventory Service</text>
  <text x="855" y="225" class="subtitle">Reservation / Compensation</text>

  <rect class="svc" x="80" y="360" width="280" height="160" />
  <text x="95" y="390" class="label">Outbox Relay</text>
  <text x="95" y="415" class="subtitle">DB → Kafka (Exactly-once-ish)</text>

  <rect class="svc" x="460" y="360" width="280" height="160" />
  <text x="475" y="390" class="label">Observability</text>
  <text x="475" y="415" class="subtitle">OpenTelemetry / Traces / DLQ</text>

  <rect class="svc" x="840" y="360" width="280" height="160" />
  <text x="855" y="390" class="label">Analytics (CDC)</text>
  <text x="855" y="415" class="subtitle">Debezium → DWH</text>

  <!-- Arrows -->
  <line class="arrow" x1="360" y1="250" x2="460" y2="250" />
  <text x="370" y="240" class="subtitle">AuthorizePayment</text>
  <line class="arrow" x1="740" y1="250" x2="840" y2="250" />
  <text x="750" y="240" class="subtitle">ReserveInventory</text>
  <line class="arrow" x1="220" y1="330" x2="220" y2="360" />
  <text x="100" y="350" class="subtitle">Transactional Outbox</text>
  <line class="arrow" x1="600" y1="330" x2="600" y2="360" />
  <line class="arrow" x1="980" y1="330" x2="980" y2="360" />
</svg>

